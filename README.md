# krdn.boilerplate
asp.net core를 기반으로한 기반 솔루션




# Entity Framewwork core 사용방법




## PocketBook API

UoW 패턴을 사용하여 구현된 Sample

- [단계별 - Asp.Net Core 5의 리포지토리 패턴 및 작업 단위](https://dev.to/moe23/step-by-step-repository-pattern-and-unit-of-work-with-asp-net-core-5-3l92) [GitHub 소스](https://github.com/mohamadlawand087/v33-repo-uow)
- [Repository Pattern and Unit of Work with ASP.NET Core Web API](https://enlear.academy/repository-pattern-and-unit-of-work-with-asp-net-core-web-api-6802e1aa4f78)

### 리포지토리 패턴이란
리포지토리 패턴은 특히 .net 코어가 빛을 발하는 API 및 마이크로서비스가 많은 세상에서 많이 언급됩니다.

저장소 패턴은 데이터 액세스 계층을 추상화 하기 위한 전략입니다  . 그렇다면 데이터 계층이란 무엇입니까? 데이터 저장 및 검색을 담당하는 애플리케이션의 코드로 구성됩니다.

이 컬렉션에서 항목을 추가, 제거, 업데이트 및 선택하는 것은 연결, 명령, 커서 또는 판독기와 같은 데이터베이스 문제를 처리할 필요 없이 일련의 간단한 방법을 통해 수행됩니다. 이 패턴을 사용하면 느슨한 결합을 달성하고 도메인 개체의 지속성을 무시할 수 있습니다.

### 리포지토리 패턴을 사용하는 이유
코드 추상화를 사용하려는 많은 이유가 있습니다.

- 코드 중복 감소: DRY 설계 원칙을 사용할 수 있습니다. 코드를 한 번만 작성하면 코드에서 원하는 모든 위치에서 사용할 수 있습니다.
- 기본 지속성 기술에 대한 느슨한 결합: 데이터베이스를 MSSQL에서 PostgreSQL로 전환해야 하는 경우. 데이터 액세스 계층을 사용하는 곳이 아니라 데이터 계층 구현에서만 변경이 필요합니다. 이렇게 하면 변경이 용이하고 오류 가능성이 줄어듭니다.
- 테스트 가능성이 훨씬 더 쉽습니다. 저장소 패턴을 사용하면 테스트를 수행할 수 있도록 데이터베이스를 조롱할 수 있습니다.
- 관심사 분리: 기능을 기반으로 하는 별도의 애플리케이션 기능으로 코드의 발전 및 유지 관리가 용이합니다.

### 작업 단위(UoW)란 무엇입니까?
리포지토리 패턴이 영구 저장소에 대한 추상화라면 작업 단위(UoW) 패턴은 원자적 작업에 대한 추상화입니다. 이를 통해 데이터 계층에서 서비스 계층을 최종적이고 완전히 분리할 수 있습니다.

작업 단위 패턴은 이제 데이터베이스 상태를 관리합니다. 범위에 있는 엔터티의 모든 업데이트가 완료되면 추적된 변경 사항이 트랜잭션의 데이터베이스에 재생되어 데이터베이스가 원하는 변경 사항을 반영하도록 합니다.

따라서 작업 단위 패턴은 비즈니스 트랜잭션을 추적하고 이를 데이터베이스 트랜잭션으로 변환하며, 여기서 단계는 단일 단위로 집합적으로 실행됩니다. 데이터 무결성이 손상되지 않도록 트랜잭션을 커밋하거나 개별적으로 롤백하여 불확실한 상태를 방지합니다.

### 작업 단위(UoW)의 이점
1. 애플리케이션의 추상 데이터 액세스 계층 및 비즈니스 액세스 계층.
2. 메모리 내 데이터베이스 작업을 관리하고 나중에 메모리 내 업데이트를 하나의 트랜잭션으로 데이터베이스에 저장합니다.
3. 종속성 주입을 사용하여 레이어를 느슨하게 결합하도록 합니다.
4. 단위 테스트 또는 테스트 주도 개발(TDD)을 따르도록 촉진합니다.




# 단위 테스트(TDD)

./src/Tests/Bank 
./tests/BankTests 
[연습: 관리 코드에 대한 단위 테스트 만들기 및 실행](https://docs.microsoft.com/ko-kr/visualstudio/test/walkthrough-creating-and-running-unit-tests-for-managed-code?view=vs-2022)